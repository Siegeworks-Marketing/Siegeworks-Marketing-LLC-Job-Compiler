<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Siegeworks | Job Search</title>
<!-- SECURITY NOTE: Add integrity="sha384-..." crossorigin="anonymous" to these tags before deploying.
     Generate hashes with: curl -s URL | openssl dgst -sha384 -binary | openssl base64 -A
     Or verify at: https://www.srihash.org/ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{background:#0D0D0D;color:#fff;font-family:system-ui,'Helvetica Neue',sans-serif}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#1A1A1A}
::-webkit-scrollbar-thumb{background:#8B1A1A;border-radius:3px}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body><div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

// â”€â”€â”€ BRAND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const C = {
  black:"#0D0D0D", dark:"#1A1A1A", mid:"#2A2A2A", card:"#141414",
  red:"#8B1A1A", white:"#FFFFFF", off:"#F5F5F5", slate:"#6B7280", border:"#2E2E2E",
  priBg:"#1A0A0A", priBdr:"#8B1A1A", priTxt:"#F87171",
  strBg:"#0A1219",  strBdr:"#1E5A8B", strTxt:"#60A5FA",
  reaoBg:"#0F1A0F", reaoBdr:"#1E6B3A", reaoTxt:"#4ADE80",
};

// â”€â”€â”€ LOGOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const LOGO_HDR = "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";
const LOGO_ICO = "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";
function SWLogo({ height=52 }) {
  return <img src={"data:image/png;base64,"+LOGO_HDR} width={Math.round(height*128/90)}
    height={height} style={{display:"block",objectFit:"contain"}} alt="Siegeworks Marketing LLC"/>;
}
function SWIcon({ size=24 }) {
  return <img src={"data:image/png;base64,"+LOGO_ICO} width={Math.round(size*84/50)}
    height={size} style={{display:"block",objectFit:"contain"}} alt="SW"/>;
}

// â”€â”€â”€ STORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const mem = {};
const LS = {
  get:     (k)    => { try{ return localStorage.getItem("sw_"+k); }catch{ return mem["sw_"+k]??null; } },
  set:     (k,v)  => { try{ localStorage.setItem("sw_"+k,v); }catch{ mem["sw_"+k]=v; } },
  del:     (k)    => { try{ localStorage.removeItem("sw_"+k); }catch{ delete mem["sw_"+k]; } },
  getJ:    (k,fb) => { try{ const v=LS.get(k); return v?JSON.parse(v):fb; }catch{ return fb; } },
  setJ:    (k,v)  => LS.set(k, JSON.stringify(v)),
};

// â”€â”€â”€ FETCH WITH HARD TIMEOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// AbortSignal.timeout is unreliable; use Promise.race instead.
function fetchT(url, ms=9000) {
  const ctrl = new AbortController();
  const timer = setTimeout(() => ctrl.abort(), ms);
  return fetch(url, {signal: ctrl.signal})
    .finally(() => clearTimeout(timer));
}

// â”€â”€â”€ DATA SOURCES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Three real, CORS-friendly, no-key-required APIs plus Indeed RSS via proxy.
// All run in parallel; results merge + deduplicate. Any that fail are silently skipped.

// 1. The Muse â€” real companies, great for marketing/creative roles
//    Docs: https://www.themuse.com/developers/api/v2
async function fetchMuse(role, location, workType) {
  // Map role keywords to Muse categories
  const lower = role.toLowerCase();
  let cats = ["Marketing"];
  if (lower.includes("brand") || lower.includes("communicat")) cats.push("Brand & Communications");
  if (lower.includes("advert") || lower.includes("media buy")) cats.push("Advertising");
  if (lower.includes("content") || lower.includes("copywr") || lower.includes("editorial")) cats.push("Content");
  if (lower.includes("social")) cats.push("Social Media");
  if (lower.includes("product market")) cats.push("Product Marketing");
  if (lower.includes("sales") || lower.includes("account exec")) cats.push("Sales");
  if (lower.includes("design") || lower.includes("creative dir")) cats.push("Design & UX");

  // Build URL â€” try first matching category + location
  const catParam = cats.slice(0,2).map(c=>"category="+encodeURIComponent(c)).join("&");
  const locParam = (workType === "Remote")
    ? "location=Flexible+%2F+Remote&location=Remote"
    : location ? "location="+encodeURIComponent(location) : "";
  const url = `https://www.themuse.com/api/public/jobs?${catParam}&${locParam}&page=0&descending=true`;

  const res = await fetchT(url, 8000);
  if (!res.ok) throw new Error("Muse API "+res.status);
  const data = await res.json();

  return (data.results||[]).map(j => {
    const loc = (j.locations||[]).map(l=>l.name).join(", ");
    const pub = new Date(j.publication_date||"");
    const daysAgo = isNaN(pub) ? 5 : Math.max(0, Math.floor((Date.now()-pub.getTime())/86400000));
    return {
      id:       "muse_"+j.id,
      source:   "The Muse",
      title:    j.name || "",
      company:  j.company?.name || "",
      location: loc,
      url:      j.refs?.landing_page || "",
      snippet:  (j.contents||"").replace(/<[^>]+>/g," ").replace(/\s{2,}/g," ").trim().slice(0,400),
      salary:   "",
      daysAgo,
      freshness: daysAgo<=1?"today": daysAgo<=3?"recent":"older",
      posted:   daysAgo===0?"Today": daysAgo===1?"Yesterday": `${daysAgo}d ago`,
      levels:   (j.levels||[]).map(l=>l.name).join(", "),
    };
  }).filter(j => j.title && j.company && j.url);
}

// 2. Remotive â€” remote jobs, solid for "Remote" work-type searches
async function fetchRemotive(role) {
  const lower = role.toLowerCase();
  let cat = "marketing";
  if (lower.includes("design")) cat = "design";
  if (lower.includes("product")) cat = "product";
  if (lower.includes("sales")) cat = "sales";

  const url = `https://remotive.com/api/remote-jobs?category=${encodeURIComponent(cat)}&limit=30`;
  const res = await fetchT(url, 8000);
  if (!res.ok) throw new Error("Remotive "+res.status);
  const data = await res.json();

  return (data.jobs||[]).map(j => {
    const pub = new Date(j.publication_date||"");
    const daysAgo = isNaN(pub) ? 5 : Math.max(0, Math.floor((Date.now()-pub.getTime())/86400000));
    return {
      id:       "rem_"+j.id,
      source:   "Remotive",
      title:    j.title || "",
      company:  j.company_name || "",
      location: "Remote",
      url:      j.url || "",
      snippet:  (j.description||"").replace(/<[^>]+>/g," ").replace(/\s{2,}/g," ").trim().slice(0,400),
      salary:   j.salary || "",
      daysAgo,
      freshness: daysAgo<=1?"today": daysAgo<=3?"recent":"older",
      posted:   daysAgo===0?"Today": daysAgo===1?"Yesterday": `${daysAgo}d ago`,
    };
  }).filter(j => j.title && j.company && j.url);
}

// 3. Indeed RSS via CORS proxy â€” best effort, hard 8s timeout, multiple proxies
const PROXIES = [
  url => ({ u: `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`, parse: async r => (await r.json()).contents }),
  url => ({ u: `https://corsproxy.io/?${encodeURIComponent(url)}`,             parse: async r => r.text() }),
];
async function fetchIndeedRSS(role, location, workType) {
  // Two smart queries run in parallel
  const queries = [];
  const loc = workType==="Remote" ? "" : location;
  queries.push({ q:`"${role}"`, l:loc });
  const words = role.trim().split(/\s+/);
  if (words.length >= 3) queries.push({ q:`"${words[0]} ${words[words.length-1]}"`, l:loc });

  const rssUrl = ({q,l}) => {
    let u = `https://www.indeed.com/rss?q=${encodeURIComponent(q)}&sort=date&fromage=7&limit=20`;
    if (l) u += "&l="+encodeURIComponent(l);
    return u;
  };

  // Try one proxy for each query, first proxy that works wins
  const tryProxy = async (query) => {
    for (const proxy of PROXIES) {
      try {
        const p = proxy(rssUrl(query));
        const res = await fetchT(p.u, 8000);
        if (!res.ok) continue;
        const txt = await p.parse(res);
        if (txt && txt.length > 200) return parseRSS(txt);
      } catch {}
    }
    return [];
  };

  const results = await Promise.allSettled(queries.map(tryProxy));
  const seen = new Set(); const all = [];
  results.forEach(r => {
    if (r.status !== "fulfilled") return;
    r.value.forEach(j => {
      const key = j.url.split("&")[0];
      if (!seen.has(key)) { seen.add(key); all.push(j); }
    });
  });
  return all;
}

function parseRSS(xml) {
  let doc;
  try { doc = new DOMParser().parseFromString(xml, "text/xml"); } catch { return []; }
  return Array.from(doc.querySelectorAll("item")).map(item => {
    const rawTitle = item.querySelector("title")?.textContent?.trim()||"";
    const link     = item.querySelector("link")?.textContent?.trim()
                  || item.querySelector("guid")?.textContent?.trim()||"";
    const desc     = item.querySelector("description")?.textContent||"";
    const pub      = item.querySelector("pubDate")?.textContent||"";
    const parts    = rawTitle.split(" - ");
    if (!link.includes("indeed.com/viewjob")) return null;
    const daysAgo  = isNaN(new Date(pub)) ? 4 : Math.max(0,
      Math.floor((Date.now()-new Date(pub).getTime())/86400000));
    if (daysAgo > 7) return null;
    const snippet  = desc.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim().slice(0,400);
    const salaryM  = snippet.match(/\$[\d,]+(?:\s*[-â€“]\s*\$[\d,]+)?/);
    return {
      id:       "ind_"+link.split("jk=")[1]?.slice(0,12)||link.slice(-12),
      source:   "Indeed",
      title:    parts[0]?.trim()||rawTitle,
      company:  parts[1]?.trim()||"",
      location: parts[2]?.trim()||"",
      url:      link,
      snippet,
      salary:   salaryM?salaryM[0]:"",
      daysAgo,
      freshness: daysAgo<=1?"today": daysAgo<=3?"recent":"older",
      posted:   daysAgo===0?"Today": daysAgo===1?"Yesterday": `${daysAgo}d ago`,
    };
  }).filter(Boolean);
}

// â”€â”€â”€ KEYWORD SCORING (no AI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STOP = new Set(
  "i me my we our you your he she his her it its they them their and the for with of in to a an is are was were be been being am do did does done have has had will would can could should shall may might must need at by on as or but not from about into this that these those then when where who which how what also just very well both each few more most other some any all".split(" ")
);
function extractKeywords(text) {
  if (!text) return [];
  const freq = {};
  text.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/)
    .filter(w => w.length>3 && !STOP.has(w) && !/^\d+$/.test(w))
    .forEach(w => { freq[w]=(freq[w]||0)+1; });
  return Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,80).map(([w])=>w);
}
function scoreJob(job, keywords, targetRole) {
  const text = `${job.title} ${job.snippet} ${job.company}`.toLowerCase();
  let s = 0;
  const target = targetRole.toLowerCase();
  if (job.title.toLowerCase()===target) s+=35;
  else if (job.title.toLowerCase().includes(target)) s+=26;
  else {
    const words = target.split(/\s+/).filter(w=>w.length>3);
    const hits  = words.filter(w=>job.title.toLowerCase().includes(w));
    s += Math.round((hits.length/Math.max(words.length,1))*18);
  }
  if (keywords.length > 0) {
    let kw=0; keywords.forEach(w=>{if(text.includes(w))kw++;});
    s += Math.min(40, Math.round((kw/Math.min(keywords.length,30))*40));
  }
  s += Math.max(0, 10 - Math.round(job.daysAgo*1.4));  // freshness bonus
  return s;
}
function rankJobs(jobs, keywords, targetRole) {
  return jobs
    .map(j => ({ ...j, score: scoreJob(j,keywords,targetRole),
      tier: (()=>{ const s=scoreJob(j,keywords,targetRole); return s>=55?"priority":s>=30?"stretch":"reach"; })() }))
    .sort((a,b)=>b.score-a.score);
}

// â”€â”€â”€ SEARCH ORCHESTRATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function searchJobs(role, location, workType, setStatus) {
  setStatus({ phase:"fetching", sources:[], done:false, error:null });

  // Run all sources in parallel; each has its own timeout
  const sources = [
    { name:"The Muse", fn: ()=>fetchMuse(role,location,workType) },
    { name:"Remotive", fn: ()=>fetchRemotive(role) },
    { name:"Indeed",   fn: ()=>fetchIndeedRSS(role,location,workType) },
  ];
  // Only fetch Remotive for remote roles to keep it relevant
  const active = workType==="Remote"
    ? sources
    : sources.filter(s=>s.name!=="Remotive");

  const results = await Promise.allSettled(active.map(s=>s.fn()));
  const completed = active.map((s,i) => ({
    name: s.name,
    ok:   results[i].status==="fulfilled",
    count:(results[i].status==="fulfilled"?results[i].value.length:0),
  }));
  setStatus({ phase:"scoring", sources:completed, done:false, error:null });

  // Merge + deduplicate
  const seen = new Set(); const all = [];
  results.forEach(r => {
    if (r.status!=="fulfilled") return;
    r.value.forEach(j => {
      if (!seen.has(j.id)) { seen.add(j.id); all.push(j); }
    });
  });

  setStatus({ phase:"done", sources:completed, done:true, error:null });
  return all;
}

// â”€â”€â”€ CLAUDE PROMPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildPrompt(jobs, resume, role) {
  const top = jobs.slice(0,8);
  const res = resume?.trim() ? `MY RESUME:\n${resume.trim().slice(0,2000)}` : "MY RESUME:\n[Paste your resume here]";
  const list = top.map((j,i)=>
    `${i+1}. ${j.title} Â· ${j.company} (${j.location||"â€”"}) Â· ${j.posted}\n   Source: ${j.source}  Apply: ${j.url}\n   ${j.snippet.slice(0,200)}`
  ).join("\n\n");
  return `I'm searching for "${role}" roles and found these ${top.length} live listings. Rank them by fit with my background, give 1-2 sentences reasoning each, and flag the top 2 for resume tailoring.

${res}

LIVE LISTINGS (${new Date().toLocaleDateString()}):
${list}

Please:
1. Rank bestâ†’worst fit with brief reasoning for each
2. Flag any where a warm LinkedIn intro would help
3. Give 2-3 tailored resume bullet suggestions for the #1 match`;
}

// â”€â”€â”€ UI PRIMITIVES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const inp = { padding:"0.55rem 0.9rem",borderRadius:6,border:"1px solid #2E2E2E",
  background:"#2A2A2A",fontSize:"0.88rem",color:"#FFF",outline:"none",
  fontFamily:"inherit",width:"100%",boxSizing:"border-box" };
function Field({label,hint,children}){
  return <div style={{display:"flex",flexDirection:"column",gap:4}}>
    <div>
      <div style={{fontSize:"0.78rem",fontWeight:600,color:C.off,letterSpacing:"0.5px"}}>{label}</div>
      {hint&&<div style={{fontSize:"0.71rem",color:C.slate,marginTop:2,lineHeight:1.4}}>{hint}</div>}
    </div>{children}</div>;
}
function TInput({label,hint,value,onChange,placeholder,type}){
  return <Field label={label} hint={hint}>
    <input type={type||"text"} value={value} onChange={e=>onChange(e.target.value)}
      placeholder={placeholder} style={inp}/></Field>;
}
function TArea({label,hint,value,onChange,placeholder,rows=6}){
  return <Field label={label} hint={hint}>
    <textarea rows={rows} value={value} onChange={e=>onChange(e.target.value)}
      placeholder={placeholder} style={{...inp,resize:"vertical",lineHeight:1.6,
      fontFamily:"monospace",fontSize:"0.82rem"}}/></Field>;
}
function RedBtn({onClick,children,disabled}){
  return <button onClick={disabled?null:onClick} style={{padding:"0.55rem 1.3rem",borderRadius:6,
    fontSize:"0.83rem",fontWeight:700,letterSpacing:"0.5px",cursor:disabled?"not-allowed":"pointer",
    border:"none",background:disabled?C.mid:C.red,color:disabled?C.slate:C.white}}>{children}</button>;
}
function OutBtn({onClick,children}){
  return <button onClick={onClick} style={{padding:"0.5rem 1.1rem",borderRadius:6,fontSize:"0.82rem",
    fontWeight:600,cursor:"pointer",border:"1px solid "+C.border,background:"transparent",color:C.off}}>
    {children}</button>;
}

// â”€â”€â”€ STEP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function StepBar({current}){
  return <div style={{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:300,margin:"0 auto"}}>
    {["Setup","Resume","Results"].map((label,i)=>{
      const active=current>=i;
      return <div key={label} style={{display:"flex",alignItems:"center",flex:i<2?1:"none"}}>
        <div style={{display:"flex",flexDirection:"column",alignItems:"center",gap:3}}>
          <div style={{width:26,height:26,borderRadius:"50%",display:"flex",alignItems:"center",
            justifyContent:"center",fontSize:"0.73rem",fontWeight:700,
            background:active?C.red:C.mid,color:active?C.white:C.slate,
            border:active?"none":"1px solid "+C.border}}>{i+1}</div>
          <span style={{fontSize:"0.62rem",textTransform:"uppercase",letterSpacing:"0.5px",
            color:active?"#FCA5A5":C.slate,whiteSpace:"nowrap"}}>{label}</span>
        </div>
        {i<2&&<div style={{flex:1,height:1.5,margin:"0 6px",marginBottom:16,background:current>i?C.red:C.border}}/>}
      </div>;
    })}
  </div>;
}

// â”€â”€â”€ SEARCH STATUS UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function StatusDot({ok,loading}){
  if (loading) return <span style={{display:"inline-block",width:8,height:8,borderRadius:"50%",
    background:C.slate,animation:"spin 1s linear infinite",border:"2px solid "+C.red,
    borderTopColor:"transparent",marginRight:6}}/>;
  return <span style={{display:"inline-block",width:8,height:8,borderRadius:"50%",marginRight:6,
    background:ok?"#4ADE80":"#F87171"}}/>;
}

function SearchPanel({status}){
  const [dots,setDots]=useState(".");
  useEffect(()=>{
    const t=setInterval(()=>setDots(d=>d.length>=3?".":d+"."),500);
    return()=>clearInterval(t);
  },[]);
  const loading = status.phase==="fetching"||status.phase==="scoring";
  return <div style={{display:"flex",flexDirection:"column",alignItems:"center",
    padding:"3.5rem 2rem",gap:20,textAlign:"center"}}>
    <div style={{width:46,height:46,borderRadius:"50%",border:"3px solid "+C.mid,
      borderTop:"3px solid "+C.red,animation:"spin 0.85s linear infinite"}}/>
    <div style={{fontSize:"1.1rem",fontWeight:700,color:C.white}}>
      {status.phase==="fetching"?`Fetching live listings${dots}`:`Scoring by resume fit${dots}`}
    </div>
    {/* Source status pills */}
    <div style={{display:"flex",gap:10,flexWrap:"wrap",justifyContent:"center"}}>
      {status.sources.length===0
        ? ["The Muse","Indeed","Remotive"].map(s=>(
            <div key={s} style={{display:"flex",alignItems:"center",background:C.mid,
              borderRadius:20,padding:"0.3rem 0.85rem",fontSize:"0.78rem",color:C.slate}}>
              <StatusDot ok={false} loading={true}/>{s}
            </div>))
        : status.sources.map(s=>(
            <div key={s.name} style={{display:"flex",alignItems:"center",background:C.mid,
              borderRadius:20,padding:"0.3rem 0.85rem",fontSize:"0.78rem",
              color:s.ok?C.off:"#F87171"}}>
              <StatusDot ok={s.ok} loading={false}/>{s.name}
              {s.ok&&<span style={{marginLeft:5,color:"#4ADE80",fontWeight:700}}>{s.count}</span>}
            </div>))}
    </div>
    <div style={{background:"#1A0808",border:"1px solid "+C.red+"44",color:"#FCA5A5",
      padding:"0.55rem 1.1rem",borderRadius:6,fontSize:"0.78rem",maxWidth:340}}>
      No AI used for search Â· Real listings Â· Keyword scoring
    </div>
  </div>;
}

// â”€â”€â”€ CLAUDE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ClaudeModal({jobs,resume,role,onClose}){
  const ref=useRef(null);
  const [copied,setCopied]=useState(false);
  const prompt=buildPrompt(jobs,resume,role);
  async function copy(){
    const text = ref.current ? ref.current.value : prompt;
    try {
      await navigator.clipboard.writeText(text);
    } catch {
      // fallback for older browsers / sandboxed iframes
      if (ref.current) { ref.current.focus(); ref.current.select(); document.execCommand("copy"); }
    }
    setCopied(true); setTimeout(()=>setCopied(false),2500);
  }
  return <div onClick={onClose} style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.88)",
    zIndex:1000,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"}}>
    <div onClick={e=>e.stopPropagation()} style={{background:C.dark,borderRadius:10,padding:"1.6rem",
      maxWidth:700,width:"100%",border:"1px solid "+C.red,
      boxShadow:"0 0 40px rgba(139,26,26,0.3)",display:"flex",flexDirection:"column",gap:14}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
        <div>
          <div style={{fontWeight:700,fontSize:"1rem",color:C.white,marginBottom:4}}>
            Analyze Fit with Claude AI
          </div>
          <div style={{fontSize:"0.8rem",color:C.slate}}>
            No API key needed Â· Copy prompt â†’ open Claude.ai â†’ paste it
          </div>
        </div>
        <button onClick={onClose} style={{background:C.mid,border:"none",color:C.white,
          width:30,height:30,borderRadius:"50%",cursor:"pointer",fontSize:"1rem"}}>Ã—</button>
      </div>
      <div style={{display:"flex",gap:8,flexWrap:"wrap"}}>
        {["â‘  Copy prompt below","â‘¡ Open Claude.ai","â‘¢ Paste & run"].map((s,i)=>(
          <div key={i} style={{display:"flex",alignItems:"center",gap:6,background:C.mid,
            borderRadius:6,padding:"0.4rem 0.7rem",fontSize:"0.77rem",color:C.off}}>
            <span style={{color:C.red,fontWeight:700}}>â†’</span>{s}
          </div>
        ))}
      </div>
      <textarea ref={ref} readOnly value={prompt} style={{background:C.black,
        border:"1px solid "+C.border,borderRadius:6,padding:"0.9rem 1rem",
        fontFamily:"monospace",fontSize:"0.74rem",color:"#FCA5A5",lineHeight:1.75,
        resize:"vertical",minHeight:220,outline:"none",width:"100%",boxSizing:"border-box"}}/>
      <div style={{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"}}>
        <RedBtn onClick={copy}>{copied?"âœ“ Copied!":"Copy Prompt"}</RedBtn>
        <button onClick={()=>window.open("https://claude.ai/new","_blank")}
          style={{padding:"0.5rem 1.1rem",borderRadius:6,fontSize:"0.82rem",fontWeight:600,
          cursor:"pointer",border:"1px solid #4A90D9",background:"#0A1929",color:"#60B8E8"}}>
          Open Claude.ai â†—
        </button>
        <button onClick={()=>{if(ref.current){ref.current.focus();ref.current.select();}}}
          style={{padding:"0.5rem 1rem",borderRadius:6,fontSize:"0.8rem",fontWeight:600,
          cursor:"pointer",border:"1px solid "+C.border,background:C.mid,color:C.off}}>
          Select All
        </button>
      </div>
      <div style={{fontSize:"0.74rem",color:C.slate,borderTop:"1px solid "+C.border,
        paddingTop:10,lineHeight:1.5}}>
        <strong style={{color:C.off}}>Privacy:</strong> Prompt sent only when you paste it into Claude.ai
        under your own account. This tool sends no data to any server.
      </div>
    </div>
  </div>;
}

// â”€â”€â”€ JOB CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TIER = {
  priority:{bg:C.priBg,bdr:C.priBdr,clr:C.priTxt,label:"Best Match"},
  stretch: {bg:C.strBg, bdr:C.strBdr, clr:C.strTxt, label:"Good Match"},
  reach:   {bg:C.reaoBg,bdr:C.reaoBdr,clr:C.reaoTxt,label:"Worth Exploring"},
};
const FRESH = {
  today:  {dot:"ðŸ”´",clr:"#F87171",bg:"#1A0808"},
  recent: {dot:"ðŸŸ¡",clr:"#FCD34D",bg:"#1A1500"},
  older:  {dot:"âšª",clr:"#6B7280",bg:"#141414"},
};
const SOURCE_STYLE = {
  "The Muse": {bg:"#0A0A1A",clr:"#818CF8",bdr:"#3730A3"},
  "Indeed":   {bg:"#1A0A00",clr:"#FB923C",bdr:"#9A3412"},
  "Remotive": {bg:"#0A1A0A",clr:"#4ADE80",bdr:"#166534"},
};

function JobCard({job,num}){
  const t=TIER[job.tier]||TIER.reach;
  const f=FRESH[job.freshness]||FRESH.older;
  const ss=SOURCE_STYLE[job.source]||{bg:C.mid,clr:C.slate,bdr:C.border};

  // Smart LinkedIn search for this specific role + company
  const linkedinApply = "https://www.linkedin.com/jobs/search/?keywords="+
    encodeURIComponent('"'+job.title+'" "'+job.company+'"')+"&sortBy=DD";
  const linkedinConn  = "https://www.linkedin.com/search/results/people/?keywords="+
    encodeURIComponent(job.company)+"&network=%5B%22F%22%2C%22S%22%5D";

  return <div style={{background:C.card,border:"1px solid "+C.border,
    borderLeft:"3px solid "+t.bdr,borderRadius:8,padding:"1.1rem 1.3rem",
    animation:"fadeIn 0.3s ease"}}>

    {/* Badge row */}
    <div style={{display:"flex",gap:5,flexWrap:"wrap",marginBottom:8,alignItems:"center"}}>
      <span style={{fontSize:"0.67rem",fontWeight:700,padding:"0.18rem 0.55rem",borderRadius:3,
        background:t.bg,color:t.clr,border:"1px solid "+t.bdr+"55",
        textTransform:"uppercase",letterSpacing:"0.7px"}}>{t.label}</span>
      <span style={{fontSize:"0.67rem",fontWeight:700,padding:"0.18rem 0.5rem",borderRadius:3,
        background:f.bg,color:f.clr,border:"1px solid "+f.clr+"33"}}>
        {f.dot} {job.posted}</span>
      <span style={{fontSize:"0.66rem",padding:"0.18rem 0.5rem",borderRadius:3,
        background:ss.bg,color:ss.clr,border:"1px solid "+ss.bdr+"55"}}>
        via {job.source}</span>
      <span style={{fontSize:"0.68rem",color:C.slate,marginLeft:"auto"}}>
        #{String(num).padStart(2,"0")}
        {job.score>0&&<span style={{marginLeft:6,color:C.off}}>Â· match {Math.min(job.score,99)}</span>}
      </span>
    </div>

    <div style={{display:"flex",gap:"1rem",alignItems:"flex-start",flexWrap:"wrap"}}>
      <div style={{flex:1,minWidth:200}}>
        <div style={{fontSize:"1.05rem",fontWeight:700,color:C.white,marginBottom:2}}>{job.title}</div>
        <div style={{fontSize:"0.87rem",fontWeight:600,color:C.red,marginBottom:6}}>
          {job.company}{job.location?" Â· "+job.location:""}</div>
        {job.salary&&<div style={{fontSize:"0.78rem",color:"#4ADE80",marginBottom:6,fontWeight:600}}>
          ðŸ’° {job.salary}</div>}
        {job.levels&&<div style={{fontSize:"0.74rem",color:C.slate,marginBottom:4}}>{job.levels}</div>}
        <p style={{fontSize:"0.8rem",color:C.slate,lineHeight:1.55,margin:0}}>
          {job.snippet.slice(0,280)}{job.snippet.length>280?"â€¦":""}</p>
      </div>

      <div style={{display:"flex",flexDirection:"column",gap:7,minWidth:142}}>
        <a href={job.url} target="_blank" rel="noreferrer" style={{display:"block",
          padding:"0.55rem 0.8rem",borderRadius:6,fontSize:"0.8rem",fontWeight:700,
          textAlign:"center",textDecoration:"none",background:C.red,color:C.white}}>
          Apply Now â†—
        </a>
        <a href={linkedinApply} target="_blank" rel="noreferrer" style={{display:"block",
          padding:"0.42rem 0.8rem",borderRadius:6,fontSize:"0.74rem",fontWeight:600,
          textAlign:"center",textDecoration:"none",background:"#0A1929",
          border:"1px solid #0077B555",color:"#60B8E8"}}>
          Search LinkedIn â†—
        </a>
        <a href={linkedinConn} target="_blank" rel="noreferrer" style={{display:"block",
          padding:"0.42rem 0.8rem",borderRadius:6,fontSize:"0.74rem",fontWeight:600,
          textAlign:"center",textDecoration:"none",background:"#0A1929",
          border:"1px solid #0077B533",color:"#93C5FD"}}>
          ðŸ”— Find Connections
        </a>
      </div>
    </div>
  </div>;
}

// â”€â”€â”€ DAILY CHECKLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function DailyChecklist({jobs}){
  const [checked,setChecked]=useState({});
  const priority=jobs.filter(j=>j.tier==="priority").slice(0,3);
  const fixed=[
    {id:"apply",  text:"Apply to all Best Match roles â€” use the red Apply Now button"},
    {id:"li",     text:"Click Find Connections on Priority roles Â· check 1st and 2nd degree"},
    {id:"dms",    text:"Send 1â€“2 warm LinkedIn DMs â€” ask for a conversation, not a job"},
    {id:"engage", text:"Comment on 2â€“3 posts from hiring managers at target companies"},
    {id:"log",    text:"Log every application: company, role, date, contact, follow-up date"},
  ];
  function toggle(id){setChecked(p=>({...p,[id]:!p[id]}));}
  function Row(id,content){
    const done=!!checked[id];
    return <div key={id} onClick={()=>toggle(id)} style={{display:"flex",alignItems:"flex-start",
      gap:10,background:C.card,border:"1px solid "+(done?C.mid:C.border),borderRadius:6,
      padding:"0.7rem 0.95rem",cursor:"pointer",opacity:done?0.45:1}}>
      <div style={{width:16,height:16,borderRadius:3,flexShrink:0,marginTop:2,
        background:done?C.red:"transparent",border:done?"none":"2px solid "+C.border,
        display:"flex",alignItems:"center",justifyContent:"center"}}>
        {done&&<span style={{color:C.white,fontSize:10,fontWeight:700}}>âœ“</span>}
      </div>
      <div style={{fontSize:"0.83rem",lineHeight:1.4,color:done?C.slate:C.off,
        textDecoration:done?"line-through":"none"}}>{content}</div>
    </div>;
  }
  return <div style={{display:"flex",flexDirection:"column",gap:7}}>
    <p style={{fontSize:"0.82rem",color:C.slate,marginBottom:4}}>Click to check off. Best Match roles auto-populate.</p>
    {priority.map((j,i)=>Row("p"+i,<span><strong style={{color:C.white}}>Apply to {j.company}</strong> Â· {j.title} Â· {j.posted}</span>))}
    {fixed.map(r=>Row(r.id,r.text))}
    <button onClick={()=>setChecked({})} style={{alignSelf:"flex-start",marginTop:4,
      padding:"0.35rem 0.85rem",background:"transparent",border:"1px solid "+C.border,
      borderRadius:5,fontSize:"0.76rem",cursor:"pointer",color:C.slate}}>Reset</button>
  </div>;
}

// â”€â”€â”€ MAIN APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DEFAULT={name:"",role:"Brand Marketing Manager",location:"Boston, MA",salary:"130000",workType:"Hybrid"};

function App(){
  const [step,    setStep]   = useState(0);
  const [prefs,   setPrefs]  = useState(()=>LS.getJ("prefs",DEFAULT));
  const [resume,  setResume] = useState(()=>LS.get("resume")||"");
  const [jobs,    setJobs]   = useState(()=>LS.getJ("jobs",[]));
  const [status,  setStatus] = useState({phase:"idle",sources:[],done:false,error:null});
  const [lastDate,setLD]     = useState(()=>LS.get("date")||"");
  const [tab,     setTab]    = useState("jobs");
  const [claude,  setClaude] = useState(false);

  useEffect(()=>{if(jobs.length>0)setStep(2);},[]);

  function pref(k,v){setPrefs(p=>{const n={...p,[k]:v};LS.setJ("prefs",n);return n;});}
  function updateResume(v){setResume(v);LS.set("resume",v);}

  async function runSearch(){
    setStep(2); setStatus({phase:"fetching",sources:[],done:false,error:null}); setJobs([]);
    try {
      const raw = await searchJobs(prefs.role,prefs.location,prefs.workType,setStatus);
      const kws = extractKeywords(resume);
      const ranked = rankJobs(raw,kws,prefs.role);
      const now = new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});
      setJobs(ranked); setLD(now);
      LS.setJ("jobs",ranked); LS.set("date",now);
      setStatus(s=>({...s,phase:"done",done:true}));
    } catch(err){
      setStatus({phase:"error",sources:[],done:false,error:err.message||"Search failed"});
    }
  }

  function reset(){
    setJobs([]); setStep(0); setStatus({phase:"idle",sources:[],done:false,error:null}); setLD("");
    LS.del("jobs"); LS.del("date");
  }

  const loading = status.phase==="fetching"||status.phase==="scoring";

  // Smart manual search links â€” used for LinkedIn, Google Jobs, BuiltIn which can't be RSS-fetched
  const MANUAL = [
    {label:"Indeed",
      desc:"Exact title Â· last 7 days Â· date sorted",
      url:`https://www.indeed.com/jobs?q=%22${encodeURIComponent(prefs.role)}%22&l=${encodeURIComponent(prefs.location)}&sort=date&fromage=7`},
    {label:"LinkedIn Jobs",
      desc:"Last 2 weeks Â· exact title match",
      url:`https://www.linkedin.com/jobs/search/?keywords=${encodeURIComponent('"'+prefs.role+'"')}&location=${encodeURIComponent(prefs.location)}&f_TPR=r1209600&sortBy=DD`},
    {label:"Google Jobs",
      desc:"Aggregated from all boards",
      url:`https://www.google.com/search?q=%22${encodeURIComponent(prefs.role)}%22+jobs+%22${encodeURIComponent(prefs.location)}%22&ibp=htl;jobs`},
    {label:"BuiltIn",
      desc:"Tech & startup companies",
      url:`https://builtin.com/jobs?search=${encodeURIComponent(prefs.role)}`},
    {label:"The Muse",
      desc:"Company culture + roles",
      url:`https://www.themuse.com/search#type=Jobs&query=${encodeURIComponent(prefs.role)}`},
    {label:"Glassdoor",
      desc:"Last 7 days with salary data",
      url:`https://www.glassdoor.com/Job/jobs.htm?typedKeyword=${encodeURIComponent(prefs.role)}&fromAge=7`},
    {label:"ZipRecruiter",
      desc:`$${Math.round(parseInt(prefs.salary||"130000")/1000)}K+ salary filter`,
      url:`https://www.ziprecruiter.com/Jobs/${encodeURIComponent(prefs.role).replace(/%20/g,"-")}?salary_minimum=${prefs.salary||"130000"}`},
    {label:"Wellfound",
      desc:"Startups & growth companies",
      url:`https://wellfound.com/jobs?role=${encodeURIComponent(prefs.role.replace(/ /g,"-").toLowerCase())}`},
  ];

  const SOURCES_LEGEND = [
    {name:"The Muse", note:"Marketing & creative roles Â· real company ATS links Â· CORS API"},
    {name:"Remotive",  note:"Remote jobs only Â· verified listings Â· CORS API"},
    {name:"Indeed",    note:"All roles Â· posted last 7 days Â· via CORS proxy (may fail in sandboxes)"},
  ];

  return (
    <div style={{fontFamily:"system-ui,'Helvetica Neue',sans-serif",background:C.black,minHeight:"100vh"}}>

      {/* â”€â”€ HEADER â”€â”€ */}
      <div style={{background:C.dark,borderBottom:"1px solid "+C.red,padding:"1.1rem 1.5rem 0.9rem",
        position:"sticky",top:0,zIndex:100}}>
        <div style={{maxWidth:960,margin:"0 auto"}}>
          <div style={{display:"flex",alignItems:"center",justifyContent:"space-between",
            marginBottom:"0.9rem",flexWrap:"wrap",gap:10}}>
            <div style={{display:"flex",alignItems:"center",gap:14}}>
              <SWLogo height={52}/>
              <div style={{borderLeft:"1px solid "+C.border,paddingLeft:14}}>
                <div style={{fontSize:"1rem",fontWeight:700,color:C.white,letterSpacing:"0.5px"}}>
                  Job Search Assistant</div>
                <div style={{fontSize:"0.71rem",color:C.slate,marginTop:1}}>
                  The Muse Â· Remotive Â· Indeed Â· Keyword scoring Â· No API key</div>
              </div>
            </div>
            <div style={{textAlign:"right"}}>
              <div style={{fontSize:"0.64rem",color:C.slate,letterSpacing:"1px",textTransform:"uppercase",marginBottom:2}}>Powered by Claude</div>
              <div style={{fontSize:"0.7rem",color:C.red,fontWeight:600}}>AI for analysis only â†—</div>
            </div>
          </div>
          <StepBar current={step}/>
        </div>
      </div>

      <div style={{maxWidth:960,margin:"0 auto",padding:"1.6rem 1.2rem 4rem"}}>

        {/* â”€â”€ STEP 0 â”€â”€ */}
        {step===0&&(
          <div style={{maxWidth:540,margin:"0 auto"}}>
            <div style={{background:C.dark,border:"1px solid "+C.border,borderRadius:10,padding:"2rem"}}>
              <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:"0.4rem"}}>
                <div style={{width:3,height:20,background:C.red,borderRadius:2}}/>
                <h2 style={{fontSize:"1.1rem",fontWeight:700,color:C.white}}>Search Criteria</h2>
              </div>
              <p style={{fontSize:"0.82rem",color:C.slate,margin:"0 0 1.5rem",lineHeight:1.5}}>
                Role title is used as a quoted search query â€” be specific.
              </p>
              <div style={{display:"flex",flexDirection:"column",gap:16}}>

                <TInput label="Target Role / Job Title"
                  hint='Exact title works best â€” "Brand Marketing Manager" not just "Marketing"'
                  value={prefs.role} onChange={v=>pref("role",v)} placeholder="e.g. Brand Marketing Manager"/>
                <TInput label="Location" value={prefs.location} onChange={v=>pref("location",v)} placeholder="e.g. Boston, MA"/>
                <TInput label="Minimum Salary (USD)" hint="Used in manual search links"
                  type="number" value={prefs.salary} onChange={v=>pref("salary",v)} placeholder="130000"/>
                <div>
                  <div style={{fontSize:"0.78rem",fontWeight:600,color:C.off,marginBottom:8,letterSpacing:"0.5px"}}>Work Type</div>
                  <div style={{display:"flex",gap:7,flexWrap:"wrap"}}>
                    {["Hybrid","Remote","On-site","Any"].map(w=>{
                      const sel=prefs.workType===w;
                      return <button key={w} onClick={()=>pref("workType",w)} style={{
                        padding:"0.38rem 1rem",borderRadius:5,fontSize:"0.8rem",fontWeight:600,cursor:"pointer",
                        background:sel?C.red:C.mid,color:sel?C.white:C.slate,
                        border:sel?"none":"1px solid "+C.border}}>{w}</button>;
                    })}
                  </div>
                </div>
              </div>
              <div style={{display:"flex",justifyContent:"flex-end",marginTop:"1.8rem"}}>
                <RedBtn onClick={()=>setStep(1)} disabled={!prefs.role||!prefs.location}>Next: Add Resume â†’</RedBtn>
              </div>
            </div>
          </div>
        )}

        {/* â”€â”€ STEP 1 â”€â”€ */}
        {step===1&&!loading&&(
          <div style={{maxWidth:540,margin:"0 auto"}}>
            <div style={{background:C.dark,border:"1px solid "+C.border,borderRadius:10,padding:"2rem"}}>
              <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:"0.4rem"}}>
                <div style={{width:3,height:20,background:C.red,borderRadius:2}}/>
                <h2 style={{fontSize:"1.1rem",fontWeight:700,color:C.white}}>Add Your Resume</h2>
              </div>
              <p style={{fontSize:"0.82rem",color:C.slate,margin:"0 0 0.5rem",lineHeight:1.5}}>
                Used locally to rank listings by keyword overlap. Also pre-fills the Claude analysis prompt.
              </p>
              <p style={{fontSize:"0.74rem",color:C.slate,margin:"0 0 1.2rem",fontStyle:"italic"}}>
                Stays in your browser. Never sent to any server by this tool.
              </p>
              <TArea label="Resume (plain text)" hint="Copy from Word or PDF â€” formatting not required"
                value={resume} onChange={updateResume} placeholder="Paste your resume here (optional)â€¦" rows={10}/>
              <div style={{display:"flex",justifyContent:"space-between",marginTop:"1.8rem",gap:8,flexWrap:"wrap"}}>
                <OutBtn onClick={()=>setStep(0)}>â† Back</OutBtn>
                <div style={{display:"flex",gap:8}}>
                  <OutBtn onClick={runSearch}>Skip â†’ Search</OutBtn>
                  <RedBtn onClick={runSearch}>ðŸ” Find Live Jobs â†’</RedBtn>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* â”€â”€ LOADING â”€â”€ */}
        {loading&&<SearchPanel status={status}/>}

        {/* â”€â”€ STEP 2 â”€â”€ */}
        {step===2&&!loading&&(
          <div>
            {/* Summary bar */}
            <div style={{background:C.dark,border:"1px solid "+C.border,borderRadius:10,
              padding:"1.2rem 1.5rem",marginBottom:"1.2rem",
              display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:10}}>
              <div>
                <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:4,flexWrap:"wrap"}}>
                  <span style={{fontSize:"1rem",fontWeight:700,color:C.white}}>{jobs.length} Listings Found</span>
                  {status.sources.length>0&&status.sources.filter(s=>s.ok).map(s=>(
                    <span key={s.name} style={{fontSize:"0.72rem",fontWeight:700,color:"#4ADE80",
                      background:"#0F1A0F",padding:"0.2rem 0.55rem",borderRadius:3,
                      border:"1px solid #1E6B3A55"}}>âœ“ {s.name} ({s.count})</span>
                  ))}
                </div>
                <div style={{fontSize:"0.77rem",color:C.slate}}>
                  {lastDate&&"Fetched "+lastDate+" Â· "}
                  {resume?"Ranked by resume fit":"Add a resume for better ranking"}
                </div>
              </div>
              <div style={{display:"flex",gap:8,flexWrap:"wrap"}}>
                <button onClick={()=>setClaude(true)} style={{padding:"0.5rem 1.1rem",borderRadius:6,
                  fontSize:"0.82rem",fontWeight:600,cursor:"pointer",
                  border:"1px solid "+C.red+"88",background:"#1A0808",color:"#FCA5A5"}}>
                  âœ¦ Analyze with Claude
                </button>
                <OutBtn onClick={runSearch}>â†º Refresh</OutBtn>
                <OutBtn onClick={reset}>â† New Search</OutBtn>
              </div>
            </div>

            {/* Error / fallback notice */}
            {status.error&&(
              <div style={{background:"#1A0808",border:"1px solid "+C.red,borderRadius:8,
                padding:"0.8rem 1.1rem",marginBottom:"1rem",fontSize:"0.8rem",color:"#F87171",lineHeight:1.5}}>
                âš  {status.error} â€” Use the <strong>Manual Search</strong> tab as a fallback.
              </div>
            )}
            {jobs.length===0&&!status.error&&(
              <div style={{background:"#1A1200",border:"1px solid #FCD34D44",borderRadius:8,
                padding:"0.8rem 1.1rem",marginBottom:"1rem",fontSize:"0.8rem",color:"#FCD34D",lineHeight:1.5}}>
                âš  No results fetched. This can happen in sandboxed environments (like Claude preview) where external API calls are blocked.
                Use the <strong>Manual Search</strong> tab to browse live listings directly.
              </div>
            )}

            {/* How it works note */}
            <div style={{background:"#0A1219",border:"1px solid #1E5A8B44",borderRadius:8,
              padding:"0.65rem 1rem",marginBottom:"1.2rem",fontSize:"0.78rem",color:"#60A5FA",lineHeight:1.5}}>
              <strong style={{color:C.off}}>How it works:</strong> Listings fetched via The Muse API,
              Remotive API, and Indeed RSS â€” no AI used for search.
              Ranked locally by keyword overlap with your resume.
              Click <strong style={{color:C.off}}>Analyze with Claude</strong> to get AI fit scoring
              using your own Claude.ai account.
            </div>

            {/* Tabs */}
            <div style={{display:"flex",gap:4,marginBottom:"1.2rem",borderBottom:"1px solid "+C.border}}>
              {[
                {id:"jobs",   label:`Results (${jobs.length})`},
                {id:"manual", label:"Manual Search"},
                {id:"check",  label:"Daily Checklist"},
                {id:"info",   label:"Data Sources"},
              ].map(t=>{
                const active=tab===t.id;
                return <button key={t.id} onClick={()=>setTab(t.id)} style={{
                  padding:"0.55rem 1rem",fontSize:"0.81rem",fontWeight:600,cursor:"pointer",
                  background:"transparent",border:"none",
                  borderBottom:active?"2px solid "+C.red:"2px solid transparent",
                  color:active?C.white:C.slate}}>{t.label}</button>;
              })}
            </div>

            {tab==="jobs"&&(
              <div style={{display:"flex",flexDirection:"column",gap:12}}>
                {jobs.length===0&&<div style={{textAlign:"center",padding:"3rem",color:C.slate,fontSize:"0.88rem"}}>
                  No listings loaded. Use Manual Search tab to browse directly.</div>}
                {jobs.map((j,i)=><JobCard key={j.id} job={j} num={i+1}/>)}
              </div>
            )}

            {tab==="manual"&&(
              <div>
                <p style={{fontSize:"0.82rem",color:C.slate,marginBottom:"1rem",lineHeight:1.5}}>
                  These boards can't be fetched automatically due to browser restrictions,
                  but all searches use your exact role title in quotes for precision.
                  Sort by Date Posted on each site for freshest results.
                </p>
                <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(240px,1fr))",gap:10}}>
                  {MANUAL.map(m=>(
                    <a key={m.label} href={m.url} target="_blank" rel="noreferrer" style={{
                      display:"block",background:C.card,border:"1px solid "+C.border,
                      borderRadius:8,padding:"0.9rem 1.1rem",textDecoration:"none"}}>
                      <div style={{fontWeight:700,color:C.white,fontSize:"0.88rem",marginBottom:3}}>{m.label}</div>
                      <div style={{fontSize:"0.75rem",color:C.slate}}>{m.desc}</div>
                    </a>
                  ))}
                </div>
              </div>
            )}

            {tab==="check"&&<DailyChecklist jobs={jobs}/>}

            {tab==="info"&&(
              <div style={{display:"flex",flexDirection:"column",gap:14,maxWidth:600}}>
                <div style={{background:"#1A0808",border:"1px solid "+C.red+"44",borderRadius:8,padding:"1rem 1.2rem"}}>
                  <div style={{fontWeight:700,color:"#FCA5A5",fontSize:"0.85rem",marginBottom:8}}>
                    Why AI isn't used for job search
                  </div>
                  <div style={{fontSize:"0.81rem",color:C.slate,lineHeight:1.65}}>
                    LLMs hallucinate job listings â€” they generate plausible-sounding but fake company names,
                    positions, and URLs. Instead, this tool queries real job board APIs directly and
                    processes the structured data they return. Every "Apply Now" link comes directly
                    from the source API, not from an AI.
                  </div>
                </div>
                {SOURCES_LEGEND.map(s=>(
                  <div key={s.name} style={{display:"flex",gap:12}}>
                    <div style={{width:3,flexShrink:0,background:C.red,borderRadius:2,marginTop:2}}/>
                    <div>
                      <div style={{fontWeight:700,color:C.white,fontSize:"0.85rem",marginBottom:3}}>{s.name}</div>
                      <div style={{fontSize:"0.81rem",color:C.slate,lineHeight:1.5}}>{s.note}</div>
                    </div>
                  </div>
                ))}
                <div style={{display:"flex",gap:12}}>
                  <div style={{width:3,flexShrink:0,background:C.red,borderRadius:2,marginTop:2}}/>
                  <div>
                    <div style={{fontWeight:700,color:C.white,fontSize:"0.85rem",marginBottom:3}}>LinkedIn / Google Jobs / BuiltIn</div>
                    <div style={{fontSize:"0.81rem",color:C.slate,lineHeight:1.5}}>
                      These boards block browser-based API access (no CORS headers), so they can't be
                      fetched automatically. Smart search URLs with your exact quoted role title are
                      provided in the Manual Search tab.
                    </div>
                  </div>
                </div>
                <div style={{display:"flex",gap:12}}>
                  <div style={{width:3,flexShrink:0,background:C.red,borderRadius:2,marginTop:2}}/>
                  <div>
                    <div style={{fontWeight:700,color:C.white,fontSize:"0.85rem",marginBottom:3}}>Resume scoring (local)</div>
                    <div style={{fontSize:"0.81rem",color:C.slate,lineHeight:1.5}}>
                      Keywords extracted from your resume (stop-words removed, top 80 by frequency).
                      Each listing is scored by title match (0â€“35 pts), keyword overlap (0â€“40 pts),
                      and freshness (0â€“10 pts). No data leaves your browser.
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        )}
      </div>

      {/* â”€â”€ FOOTER â”€â”€ */}
      <div style={{borderTop:"1px solid "+C.border,background:C.dark,padding:"1rem 1.5rem",
        display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8}}>
        <div style={{display:"flex",alignItems:"center",gap:10}}>
          <SWIcon size={26}/>
          <span style={{fontSize:"0.73rem",color:C.slate}}>Siegeworks Marketing LLC</span>
        </div>
        <span style={{fontSize:"0.72rem",color:C.slate}}>
          The Muse Â· Remotive Â· Indeed RSS Â· No API key Â· AI analysis via Claude.ai
        </span>
      </div>

      {claude&&<ClaudeModal jobs={jobs} resume={resume} role={prefs.role} onClose={()=>setClaude(false)}/>}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>